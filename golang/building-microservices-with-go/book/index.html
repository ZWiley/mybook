<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>《Building Microservices With Go》 - ZWiley的读书笔记</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<meta name="generator" content="mkdocs-1.1.2, mkdocs-gitbook-1.0.7">

<link rel="shortcut icon" href="../../../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../../../css/style.min.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href="../../.." target="_blank" class="custom-link">ZWiley的读书笔记</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="">
<a href="../../..">简介</a>
<li class="header">C++</li>

<li>
<a href="../../../%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/C%2B%2B%E7%BC%96%E8%AF%91%E5%BA%95%E5%B1%82/" class="">《C++编译底层》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/C%2B%2B%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="">《C++基础知识》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/C%2B%2B%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88_%E5%BC%82%E5%B8%B8%E6%9C%BA%E5%88%B6_%E5%BC%BA%E5%88%B6%E8%BD%AC%E6%8D%A2_RTTI/" class="">《C++智能指针》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/C%2B%2B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" class="">《C++面向对象》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E7%A1%80%E8%AF%AD%E8%A8%80/STL/" class="">《C++ STL》</a>
</li>

<li class="header">计算机基础知识</li>

<li>
<a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" class="">《操作系统》</a>
</li>

<li>
<a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="">《计算机网络》</a>
</li>

<li>
<a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="">《数据结构》</a>
</li>

<li>
<a href="../../../%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/%E6%B5%B7%E9%87%8F%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86/" class="">《海量数据处理》</a>
</li>

<li class="header">《基本手写代码》</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E6%8F%92%E5%85%A5%E6%8E%92%E5%BA%8F.cpp" class="">《插入排序》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F.cpp" class="">《单例模式》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E5%A0%86%E6%8E%92%E5%BA%8F.cpp" class="">《堆排序》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E4%BA%8C%E5%88%86%E6%9F%A5%E6%89%BE%E6%B3%95.cpp" class="">《二分查找法》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E9%9D%9E%E9%80%92%E5%BD%92%E4%BA%8C%E5%8F%89%E6%A0%91%E9%81%8D%E5%8E%86.cpp" class="">《非递归二叉树遍历》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E5%BD%92%E5%B9%B6%E6%8E%92%E5%BA%8F.cpp" class="">《归并排序》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E5%BF%AB%E9%80%9F%E6%8E%92%E5%BA%8F.cpp" class="">《快速排序》</a>
</li>

<li>
<a href="../../../%E5%9F%BA%E6%9C%AC%E6%89%8B%E5%86%99%E4%BB%A3%E7%A0%81/%E6%99%BA%E8%83%BD%E6%8C%87%E9%92%88%E7%9A%84%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0.cpp" class="">《智能指针的设计与实现》</a>
</li>

<li class="header">项目基础知识</li>

<li>
<a href="../../../%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Linux%E7%B3%BB%E7%BB%9F%E7%BC%96%E7%A8%8B%E5%8F%8A%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/" class="">《Linux系统编程及基本命令》</a>
</li>

<li>
<a href="../../../%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/MySQL/" class="">《MySQL》</a>
</li>

<li>
<a href="../../../%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Redis/" class="">《Redis》</a>
</li>

<li>
<a href="../../../%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/Socket%E7%BC%96%E7%A8%8B/" class="">《Socket编程》</a>
</li>

<li class="header">代码</li>

<li>
<a href="../../../code/work_with_legacy_code/" class="">《Work with legacy code》</a>
</li>

<li>
<a href="../../../code/%E4%BB%A3%E7%A0%81%E5%A4%A7%E5%85%A8/" class="">《代码大全》</a>
</li>

<li>
<a href="../../../code/%E4%BB%A3%E7%A0%81%E7%9A%84%E6%9C%AA%E6%9D%A5/" class="">《代码的未来》</a>
</li>

<li>
<a href="../../../code/%E5%9F%BA%E6%9C%AC%E5%8A%9F/" class="">《基本功》</a>
</li>

<li>
<a href="../../../code/%E6%95%8F%E6%8D%B7%E6%8A%80%E8%83%BD%E4%BF%AE%E7%82%BC/" class="">《敏捷技能修炼》</a>
</li>

<li>
<a href="../../../code/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%8497%E4%BB%B6%E4%BA%8B/" class="">《程序员应该知道的97件事》</a>
</li>

<li>
<a href="../../../code/%E7%BC%96%E5%86%99%E5%8F%AF%E8%AF%BB%E4%BB%A3%E7%A0%81%E7%9A%84%E8%89%BA%E6%9C%AF/" class="">《编写可读代码的艺术》</a>
</li>

<li>
<a href="../../../code/%E7%BC%96%E7%A8%8B%E5%8C%A0%E8%89%BA/" class="">《编程匠艺》</a>
</li>

<li>
<a href="../../../code/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1/" class="">《领域驱动设计》</a>
</li>

<li>
<a href="../../../code/codelife_%E4%B8%8D%E6%AD%A2%E4%BB%A3%E7%A0%81/" class="">《codelife_不止代码》</a>
</li>

<li class="header">调试技术</li>

<li>
<a href="../../../debug/%E8%BD%AF%E4%BB%B6%E8%B0%83%E8%AF%95%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/book/" class="">《软件调试修炼之道》</a>
</li>

<li>
<a href="../../../debug/Effective_Debugging/" class="">《Effective Debugging》</a>
</li>

<li class="header">数据库</li>

<li>
<a href="../../../database/getting_started_with_impala/" class="">《Getting started with impala》</a>
</li>

<li>
<a href="../../../database/mysql%E5%BF%85%E7%9F%A5%E5%BF%85%E4%BC%9A/" class="">《mysql必知必会》</a>
</li>

<li>
<a href="../../../database/mysql%E6%80%A7%E8%83%BD%E8%B0%83%E4%BC%98%E4%B8%8E%E6%9E%B6%E6%9E%84%E5%AE%9E%E8%B7%B5/" class="">《mysql性能调优与架构实践》</a>
</li>

<li>
<a href="../../../database/Mysql%E6%8A%80%E6%9C%AF%E5%86%85%E5%B9%95InnoDB%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/" class="">《Mysql技术内幕InnoDB存储引擎》</a>
</li>

<li>
<a href="../../../database/redis%E5%AE%9E%E6%88%98/" class="">《Redis实战》</a>
</li>

<li>
<a href="../../../database/redis%E6%B7%B1%E5%BA%A6%E5%8E%86%E9%99%A9%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E5%92%8C%E5%BA%94%E7%94%A8%E5%AE%9E%E8%B7%B5/book/" class="">《Redis深度历险核心原理和应用实践》</a>
</li>

<li>
<a href="../../../database/redis%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/" class="">《redis设计与实现》</a>
</li>

<li>
<a href="../../../database/%E4%B8%83%E5%91%A8%E4%B8%83%E6%95%B0%E6%8D%AE%E5%BA%93/" class="">《七周七数据库》</a>
</li>

<li>
<a href="../../../database/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAmysql/" class="">《深入浅出mysql》</a>
</li>

<li>
<a href="../../../database/%E9%AB%98%E6%80%A7%E8%83%BDmysql%E7%AC%AC%E4%B8%89%E7%89%88/" class="">《高性能mysql第三版》</a>
</li>

<li class="header">前端</li>

<li>
<a href="../../../frontend/CSS_The_Missing_Manual/" class="">《CSS_The_Missing_Manual》</a>
</li>

<li>
<a href="../../../frontend/reactjs_%E5%B0%8F%E4%B9%A6/" class="">《reactjs小书》</a>
</li>

<li>
<a href="../../../frontend/es6%E6%A0%87%E5%87%86%E5%85%A5%E9%97%A8/" class="">《ES6标准入门》</a>
</li>

<li>
<a href="../../../frontend/jquery_pocket_reference/" class="">《jquery_pocket_reference》</a>
</li>

<li>
<a href="../../../frontend/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3bootstrap/" class="">《深入理解bootstrap》</a>
</li>

<li class="header">golang</li>

<li>
<a href="../../1_the_go_programming_lauguage/" class="">《1 The Go Programming Language》</a>
</li>

<li>
<a href="../../2_the_go_programming_lauguage/" class="">《2 The Go Programming Language》</a>
</li>

<li>
<a href="../../3_the_go_programming_lauguage/" class="">《3 The Go Programming Language》</a>
</li>

<li>
<a href="../../build-web-application-with-golang/" class="">《Build Web Application With Golang》</a>
</li>

<li>
<a href="../../go101/book/" class="">《Go101》</a>
</li>

<li>
<a href="../../network-programming-with-go/book/" class="">《Network Programming with go》</a>
</li>

<li>
<a href="./" class="active">《Building Microservices With Go》</a>
</li>

<li>
<a href="../../building_restful_web_services_with_go/book/" class="">《Building Restful Web Services with Go》</a>
</li>

<li>
<a href="../../concurrency-in-go/concurrency_in_go/" class="">《Concurrency In Go》</a>
</li>

<li>
<a href="../../go_in_action%28go%E8%AF%AD%E8%A8%80%E5%AE%9E%E6%88%98%29/" class="">《Go In Action(Go 实战)》</a>
</li>

<li>
<a href="../../go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E8%AF%AD%E8%A8%80%E8%AF%A6%E8%A7%A3/" class="">《Go学习笔记语言详解》</a>
</li>

<li>
<a href="../../go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90/" class="">《Go学习笔记源码剖析》</a>
</li>

<li>
<a href="../../go%E8%AF%AD%E8%A8%80%E7%BC%96%E7%A8%8B/" class="">《go语言编程》</a>
</li>

<li>
<a href="../../the_way_to_go/book/" class="">《go book》</a>
</li>

<li>
<a href="../../advanced-go-programming-book/advanced-go-programming/" class="">《advanced-go-programming》</a>
</li>

<li>
<a href="../../go-build-web-applications/module1/go-build-web-applications/go-build-web-applications/" class="">《go-build-web-applications》</a>
</li>

<li class="header">java</li>

<li>
<a href="../../../java/java-basic-introduction/" class="">《java basic introduction》</a>
</li>

<li class="header">网络</li>

<li>
<a href="../../../network/tcp_ip%E8%AF%A6%E8%A7%A3%E5%8D%B7%E4%B8%80/tcp_ip%E8%AF%A6%E8%A7%A3%E5%8D%B7%E4%B8%80/" class="">《TCP IP详解卷一》</a>
</li>

<li class="header">python</li>

<li>
<a href="../../../python/fluent_python/" class="">《Fluent Python》</a>
</li>

<li>
<a href="../../../python/Python_Microservices_Development/" class="">《Python Microservices Development》</a>
</li>

<li>
<a href="../../../python/high_performance_python/" class="">《High Performance Python》</a>
</li>

<li>
<a href="../../../python/python_%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" class="">《Python网络编程》</a>
</li>

<li class="header">unix/linux</li>

<li>
<a href="../../../unix_linux/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B/Linux%E9%AB%98%E6%80%A7%E8%83%BD%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%BC%96%E7%A8%8B/" class="">《Linux高性能服务器编程》</a>
</li>

<li>
<a href="../../../unix_linux/unix%E7%BC%96%E7%A8%8B%E8%89%BA%E6%9C%AF/" class="">《unix编程艺术》</a>
</li>

<li>
<a href="../../../unix_linux/unix%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%8D%B7%E4%B8%80/" class="">《unix网络编程卷一》</a>
</li>

<li>
<a href="../../../unix_linux/unix%E7%BC%96%E7%A8%8B%E8%89%BA%E6%9C%AF/" class="">《unix编程艺术》</a>
</li>

<li>
<a href="#">《APUE》</a>
<ul>

<li>
<a href="../../../unix_linux/APUE/environ/" class="">《APUE environ》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/fork/" class="">《APUE fork》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/gcc/" class="">《APUE gcc》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/IO/" class="">《APUE IO》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/IPC/" class="">《APUE IPC》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/makefile/" class="">《APUE makefile》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/wait/" class="">《APUE wait》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93/" class="">《APUE 动态库和静态库》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B/" class="">《APUE 守护进程》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90/" class="">《APUE 文件权限》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E7%B3%BB%E7%BB%9FIO%E5%87%BD%E6%95%B0/" class="">《APUE 系统IO函数》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E4%BF%A1%E5%8F%B7/" class="">《APUE 信号》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E4%BF%A1%E5%8F%B72/" class="">《APUE 信号2》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E7%BA%BF%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E5%87%BD%E6%95%B0/" class="">《线程函数》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E7%BA%BF%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E5%9F%BA%E7%A1%80/" class="">《线程基础》</a>
</li>

<li>
<a href="../../../unix_linux/APUE/%E7%BA%BF%E7%A8%8B/%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%AD%A5/" class="">《线程同步》</a>
</li>
</ul>
</li>

<li class="header">分布式</li>

<li>
<a href="../../../%E5%88%86%E5%B8%83%E5%BC%8F/Kafka%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97/" class="">《Kafka 权威指南》</a>
</li>

<li>
<a href="../../../%E5%88%86%E5%B8%83%E5%BC%8F/%E5%88%86%E5%B8%83%E5%BC%8F%E6%A1%86%E6%9E%B6%E5%8E%9F%E7%90%86%E4%B8%8E%E5%BA%94%E7%94%A8/" class="">《分布式框架原理与应用》</a>
</li>

<li>
<a href="../../../%E5%88%86%E5%B8%83%E5%BC%8F/%E5%A4%A7%E8%A7%84%E6%A8%A1%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%E7%B3%BB%E7%BB%9F/" class="">《大规模分布式存储系统》</a>
</li>

<li>
<a href="../../../%E5%88%86%E5%B8%83%E5%BC%8F/%E6%B7%B1%E5%85%A5%E5%88%86%E5%B8%83%E5%BC%8F%E7%BC%93%E5%AD%98%E4%BB%8E%E5%8E%9F%E7%90%86%E5%88%B0%E5%AE%9E%E8%B7%B5/" class="">《深入分布式缓存从原理到实践》</a>
</li>

<li class="header">搜索引擎</li>

<li>
<a href="../../../%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/Elasticsearch%E5%AE%9E%E6%88%98/book/" class="">《Elasticsearch实战》</a>
</li>

<li class="header">容器</li>

<li>
<a href="../../../devops/%E7%8E%A9%E8%BD%ACKubernets-CloudMan/" class="">《玩转Kubernets》</a>
</li>

<li>
<a href="../../../devops/%E7%AC%AC%E4%B8%80%E6%9C%ACdocker%E4%B9%A6/" class="">《第一本docker书》</a>
</li>

<li class="header">开发工具</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/practical_vim/practical_vim/" class="">《Practical Vim》</a>
</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/vim8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98/vim8%E6%96%87%E6%9C%AC%E5%A4%84%E7%90%86%E5%AE%9E%E6%88%98/" class="">《Vim8文本处理实战》</a>
</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/learn_vim_the_hard_way/" class="">《Learn vim scrpt the hard way》</a>
</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/pro_git/" class="">《Pro Git》</a>
</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/Mastering_vim/" class="">《Mastering Vim》</a>
</li>

<li>
<a href="../../../%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/mastering_vim_quickly/" class="">《Mastering Vim Quickly》</a>
</li>

<li class="header">思维</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E4%B8%93%E6%B3%A8%E5%8A%9B_%E5%8C%96%E7%B9%81%E4%B8%BA%E7%AE%80%E7%9A%84%E6%83%8A%E4%BA%BA%E5%8A%9B%E9%87%8F/" class="">《专注力》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E4%B8%BA%E4%BB%80%E4%B9%88%E7%B2%BE%E8%8B%B1%E8%BF%99%E6%A0%B7%E7%94%A8%E8%84%91%E4%B8%8D%E4%BC%9A%E7%B4%AF/" class="">《为什么精英这样用脑不会累》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E5%88%BB%E6%84%8F%E7%BB%83%E4%B9%A0/" class="">《刻意练习》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E5%A6%82%E4%BD%95%E6%83%B3%E5%88%B0%E5%8F%88%E5%81%9A%E5%88%B0/" class="">《如何想到又做到》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E5%AD%A6%E4%B9%A0%E4%B9%8B%E9%81%93/" class="">《学习之道》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E5%AD%A6%E4%B9%A0%E5%8A%9B/" class="">《学习力》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E6%89%B9%E5%88%A4%E6%80%A7%E6%80%9D%E7%BB%B4%E5%B7%A5%E5%85%B7/" class="">《批判性思维工具》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E6%80%9D%E7%BB%B4%E4%BF%AE%E7%82%BC%28%E5%BC%80%E5%8F%91%E8%AE%A4%E7%9F%A5%E6%BD%9C%E8%83%BD%E7%9A%84%E4%B9%9D%E5%A0%82%E8%AF%BE%29/" class="">《程序员的思维修炼》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E8%AE%A4%E7%9F%A5%E5%A4%A9%E6%80%A7/" class="">《认知天性》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E8%B6%85%E6%95%88%E7%8E%87%E6%89%8B%E5%86%8C/" class="">《超效率手册》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E8%AE%B0%E5%BF%86/" class="">《如何高效记忆》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E7%A7%91%E5%AD%A6%E5%AD%A6%E4%B9%A0/" class="">《科学学习》</a>
</li>

<li>
<a href="../../../%E6%80%9D%E7%BB%B4%E8%AE%A4%E7%9F%A5/%E9%AB%98%E6%95%88%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%8445%E4%B8%AA%E4%B9%A0%E6%83%AF/" class="">《高效程序员的45个习惯》</a>
</li>

<li class="header">源码</li>

<li>
<a href="../../../%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB_sourcecode/" class="">《源码阅读》</a>
</li>

<li class="header">网站架构微服务</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/microservices_patterns_%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/book/" class="">《微服务架构设计模式》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AD%A6%E6%9E%B6%E6%9E%84/%E4%BB%8E0%E5%BC%80%E5%A7%8B%E5%AD%A6%E6%9E%B6%E6%9E%84/" class="">《从0开始学架构》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/web_scalavility_for_startup_engineers/" class="">《web scalavility for startup engineers》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/design_data_instensive_application/" class="">《design_data_instensive_application》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/clean_architecture/" class="">《clean_architecture》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E8%AE%BE%E8%AE%A1/" class="">《微服务设计》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/2_design_data_instensive_application/" class="">《2_design_data_instensive_application》</a>
</li>

<li>
<a href="../../../%E7%BD%91%E7%AB%99%E6%9E%B6%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1/3_design_data_instensive_application/" class="">《3_design_data_instensive_application》</a>
</li>

<li class="header">软件工程/项目管理</li>

<li>
<a href="../../../%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B_%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E4%BA%BA%E6%9C%88%E7%A5%9E%E8%AF%9D/" class="">《人月神话》</a>
</li>

<li>
<a href="../../../%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B_%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E4%BB%A3%E7%A0%81%E4%B9%8B%E6%AE%87/" class="">《代码之殇》</a>
</li>

<li>
<a href="../../../%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B_%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E8%A7%A3%E6%9E%90%E6%9E%81%E9%99%90%E7%BC%96%E7%A8%8B-%E6%8B%A5%E6%8A%B1%E5%8F%98%E5%8C%96/" class="">《解析极限编程》</a>
</li>

<li>
<a href="../../../%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B_%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E4%BF%AE%E7%82%BC%E4%B9%8B%E9%81%93/" class="">《项目管理修炼之道》</a>
</li>

<li>
<a href="../../../%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B_%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86/%E4%BF%AE%E6%94%B9%E8%BD%AF%E4%BB%B6%E7%9A%84%E8%89%BA%E6%9C%AF/" class="">《修改软件的艺术》</a>
</li>

<li class="header">运维</li>

<li>
<a href="../../../%E8%BF%90%E7%BB%B4/linux%E9%9B%86%E7%BE%A4%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" class="">《linux集群和自动化运维》</a>
</li>

<li>
<a href="../../../%E8%BF%90%E7%BB%B4/python%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E7%BB%B4/" class="">《python自动化运维》</a>
</li>

<li class="header">金融理财</li>

<li>
<a href="../../../%E9%87%91%E8%9E%8D%E7%90%86%E8%B4%A2/%E5%AE%9A%E6%8A%95%E5%8D%81%E5%B9%B4/" class="">《定投十年》</a>
</li>

<li>
<a href="../../../%E9%87%91%E8%9E%8D%E7%90%86%E8%B4%A2/%E7%A9%B7%E6%9F%A5%E7%90%86%E5%AE%9D%E5%85%B8/" class="">《穷查理宝典》</a>
</li>

<li class="header">写作</li>

<li>
<a href="../../../%E5%86%99%E4%BD%9C/%E5%88%B7%E5%B1%8F%E6%96%87%E6%A1%88%E5%86%99%E4%BD%9C%E6%8A%80%E5%B7%A7/" class="">《刷屏文案写作技巧》</a>
</li>

<li class="header">互联网</li>

<li>
<a href="../../../%E4%BA%92%E8%81%94%E7%BD%91/%E6%88%91%E7%9A%84%E4%BA%92%E8%81%94%E7%BD%91%E6%96%B9%E6%B3%95%E8%AE%BA-%E5%91%A8%E9%B8%BF%E7%A5%8E/" class="">《我的互联网方法论-周鸿祎》</a>
</li>

<li>
<a href="../../../%E4%BA%92%E8%81%94%E7%BD%91/%E7%94%A8%E6%88%B7%E6%80%9D%E7%BB%B4/" class="">《用户思维》</a>
</li>

<li class="header">区块链</li>

<li>
<a href="../../../%E5%8C%BA%E5%9D%97%E9%93%BE/%E5%8C%BA%E5%9D%97%E9%93%BE%E6%8A%80%E6%9C%AF%E6%8C%87%E5%8D%97%28blockchain_guide%29/" class="">《区块链技术指南》</a>
</li>

<li class="header">技术演讲</li>

<li>
<a href="../../../lecture/Gopher/%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%E7%9A%84go%E5%BE%AE%E6%9C%8D%E5%8A%A1%E5%AE%9E%E6%88%98/note/" class="">《哔哩哔哩的go微服务实战》</a>
</li>

<li>
<a href="../../../lecture/Gopher/Go_Error/go%E4%B8%9A%E5%8A%A1%E5%9F%BA%E7%A1%80%E5%BA%93%E4%B9%8BError%26Context/" class="">《go业务基础库之Error&Context》</a>
</li>

<li>
<a href="../../../lecture/Gopher/Go%E5%90%8C%E6%AD%A5%E5%92%8C%E5%B9%B6%E5%8F%91%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/note/" class="">《Go同步和并发设计模式》</a>
</li>

<li>
<a href="../../../lecture/%E6%8A%80%E6%9C%AF%E6%BC%94%E8%AE%B2/%E5%B7%A6%E8%80%B3%E6%9C%B5%E8%80%97%E5%AD%90-%E6%88%91%E8%BF%99%E6%8A%80%E6%9C%AF%E4%BA%8C%E5%8D%81%E5%B9%B4/" class="">《左耳朵耗子-我这技术二十年》</a>
</li>

<li class="header">职场</li>

<li>
<a href="../../../career/give_and_take/" class="">《give and take》</a>
</li>

<li>
<a href="../../../career/the_effective_engineer/" class="">《the_effective_engineer》</a>
</li>

<li>
<a href="../../../career/%E5%85%89%E9%80%9F%E6%88%90%E9%95%BF/" class="">《光速成长》</a>
</li>

<li>
<a href="../../../career/%E5%90%91%E4%B8%8A%E7%AE%A1%E7%90%86/" class="">《向上管理》</a>
</li>

<li>
<a href="../../../career/%E6%88%90%E5%8A%9F%E5%8A%A8%E6%9C%BA%E4%B8%8E%E7%9B%AE%E6%A0%87/" class="">《成功动机与目标》</a>
</li>

<li>
<a href="../../../career/%E7%95%AA%E8%8C%84%E5%B7%A5%E4%BD%9C%E6%B3%95/" class="">《番茄工作法》</a>
</li>

<li>
<a href="../../../career/%E8%81%86%E5%90%AC%E6%B2%9F%E9%80%9A%E5%AD%A6/" class="">《聆听沟通学》</a>
</li>

<li>
<a href="../../../career/%E7%9F%A5%E4%B9%8E%E8%81%8C%E4%BA%BA%E8%A7%89%E9%86%92/" class="">《知乎职人觉醒》</a>
</li>

<li>
<a href="../../../career/%E7%9F%A5%E8%AF%86%E5%8F%98%E7%8E%B0/" class="">《知识变现》</a>
</li>

<li>
<a href="../../../career/%E8%81%86%E5%90%AC%E6%B2%9F%E9%80%9A%E5%AD%A6/" class="">《聆听沟通学》</a>
</li>

<li>
<a href="../../../career/%E8%81%8C%E5%9C%BA%E5%8A%A8%E7%89%A9%E8%BF%9B%E5%8C%96%E6%89%8B%E5%86%8C/" class="">《职场动物进化手册》</a>
</li>

<li>
<a href="../../../career/%E8%81%8C%E5%9C%BA%E8%A7%A3%E9%87%8A%E7%B3%BB/" class="">《职场解释系》</a>
</li>

<li>
<a href="../../../career/%E8%AF%B7%E5%81%9C%E6%AD%A2%E6%97%A0%E6%95%88%E5%8A%AA%E5%8A%9B/" class="">《请停止无效努力》</a>
</li>

<li>
<a href="../../../career/%E8%BD%AF%E6%8A%80%E8%83%BD/" class="">《软技能》</a>
</li>

<li>
<a href="../../../career/%E9%AB%98%E6%95%8815%E6%B3%95%E5%88%99/" class="">《高效15法则》</a>
</li>

<li>
<a href="../../../career/%E9%AB%98%E6%95%88%E6%B8%85%E5%8D%95%E5%B7%A5%E4%BD%9C%E6%B3%95/" class="">《高效清单工作法》</a>
</li>

<li>
<a href="../../../career/%E7%A8%8B%E5%BA%8F%E5%91%98%E7%9A%84%E8%87%AA%E6%88%91%E4%BF%AE%E5%85%BB/" class="">《程序员的自我修养》</a>
</li>

<li class="header">心理学</li>

<li>
<a href="../../../psychology/%E4%B8%80%E5%88%87%E9%83%BD%E6%98%AF%E7%AB%A5%E5%B9%B4%E7%9A%84%E9%94%99%E5%90%97/" class="">《一切都是童年的错吗》</a>
</li>

<li>
<a href="../../../psychology/%E4%BA%B2%E5%AF%86%E5%85%B3%E7%B3%BB/" class="">《亲密关系》</a>
</li>

<li>
<a href="../../../psychology/%E6%83%85%E5%95%86/" class="">《情商》</a>
</li>

<li>
<a href="../../../psychology/%E6%8B%96%E5%BB%B6%E5%BF%83%E7%90%86%E5%AD%A6/" class="">《拖延心理学》</a>
</li>

<li>
<a href="../../../psychology/%E7%A7%AF%E6%9E%81%E5%BF%83%E7%90%86%E5%AD%A6/" class="">《积极心理学》</a>
</li>

<li>
<a href="../../../psychology/%E8%87%AA%E6%8E%A7%E5%8A%9B/" class="">《自控力》</a>
</li>

<li>
<a href="../../../psychology/%E8%87%AA%E6%8E%A7%E5%8A%9B-%E5%92%8C%E5%8E%8B%E5%8A%9B%E5%81%9A%E6%9C%8B%E5%8F%8B/" class="">《自控力:和压力做朋友》</a>
</li>

<li>
<a href="../../../psychology/%E6%B4%BB%E5%87%BA%E6%9C%80%E4%B9%90%E8%A7%82%E7%9A%84%E8%87%AA%E5%B7%B1/" class="">《活出最乐观的自己》</a>
</li>

<li>
<a href="../../../psychology/%E6%94%B9%E5%8F%98%E5%BF%83%E7%90%86%E5%AD%A6%E7%9A%8440%E9%A1%B9%E7%A0%94%E7%A9%B6/" class="">《改变心理学的40项研究》</a>
</li>

<li>
<a href="../../../psychology/%E8%B6%85%E8%B6%8A%E8%87%AA%E5%8D%91/" class="">《超越自卑》</a>
</li>

<li>
<a href="../../../psychology/%E5%8F%8D%E8%84%86%E5%BC%B1/" class="">《反脆弱》</a>
</li>

<li class="header">创业</li>

<li>
<a href="../../../startup/hello_startup/" class="">《Hello Startup》</a>
</li>

<li>
<a href="../../../startup/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%85%AC%E5%BC%80%E8%AF%BE-%E5%A6%82%E4%BD%95%E5%88%9B%E4%B8%9A/" class="">《斯坦福公开课如何创业》</a>
</li>

<li>
<a href="../../../startup/%E8%BF%90%E8%90%A5%E5%85%B6%E5%AE%9E%E5%BE%88%E7%AE%80%E5%8D%95/" class="">《运营其实很简单》</a>
</li>

<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<h1 id="3-docker">3. Docker</h1>
<p>Containers are immutable instances of images, and the data volumes are by default non-persistent.</p>
<h1 id="4-testing">4. Testing</h1>
<p>use httptest</p>
<pre><code>func TestSearchHandler( t *testing.T) {
    handler := SearchHandler{}
    request := httptest.NewRequest(&quot;GET&quot;, &quot;/search&quot;, nil)
    response := httptest.NewRecorder()

    handler.ServeHTP(response, request)
    if response.Code != http.StatusBadRequest{
        t.Errorf(&quot;Expected BadRequest got %v&quot;, response.Code)
    }
}
// httptest generate Mock versions of the dependent objects http.Request and http.ResponseWriter
</code></pre>

<h3 id="dependency-injection-and-mocking">Dependency injection and mocking</h3>
<p>github.com/stretchr/testify</p>
<h3 id="code-coverage">Code coverage</h3>
<pre><code>go test -cover ./...
</code></pre>

<h3 id="behavioral-driven-developentbdd">Behavioral Driven Developent(BDD)</h3>
<p>github.com/DATA-DOG/godog/cmd/godog</p>
<h3 id="testing-with-docker-compose">Testing with Docker Compose</h3>
<h3 id="benchmarking-and-profiling">Benchmarking and profiling</h3>
<p>search_bench_test.go
go test -bench=. -benchmem</p>
<p>Go supports three different types of profiling:</p>
<ul>
<li>CPU, Identifies the tasks which require the most CPU time</li>
<li>Heap: Identifies the statements responsible for allocating the most memory</li>
<li>Blocking: Identifies the operations responsible for blocking Goroutines for the longest time</li>
</ul>
<p>Add it to the beginning of your main Go file and, if you are not already running an HTTP web server,
start one:</p>
<pre><code>import (
    &quot;log&quot;
    _ &quot;net/http/pprof&quot;
)

go func() {
    log.Println(http.ListenAndServe(&quot;localhost:6060&quot;, nil))
}
</code></pre>

<h1 id="5-commong-patterns">5. Commong Patterns</h1>
<h3 id="design-for-failure">Design for failure</h3>
<p>Anything that can go wrong will go wrong.
想象一个场景，你使用了同步方式调用第三方邮件发送API，某一天用户量因为打了广告大涨，结果却因为调用
邮件API的频率限制导致应用一直失败。</p>
<h3 id="patterns">Patterns</h3>
<h5 id="event-processing">Event Processing</h5>
<p>The first question we should ask ourselves is "Does this call need to be synchronous?"</p>
<p>Event processing with at least once delivery.</p>
<h5 id="hanlding-errors">Hanlding Errors</h5>
<p>Append the error every time we fail to process a message as it gives us the history of what went wrong.</p>
<h5 id="dead-letter-queue">Dead Letter Queue</h5>
<p>we can examine the failed messages on this queue to assist us with debugging the system</p>
<h5 id="idempotent-transactions-and-message-order">Idempotent transactions and message order</h5>
<h5 id="atomic-transactions">Atomic transactions</h5>
<p>try to avoid distributed transactons. Use message queue, when somethiing fails, keep retrying</p>
<h5 id="timeouts">Timeouts</h5>
<p>The key feature of a timeout is to fail fast and to notify the caller of this failure.</p>
<pre><code>// github.com/eapache/go-resiliency/tree/master/deadline
func makeTimeoutRequest() {
    dl := deadline.New(1 * time.Second)
    err := dl.Run(func(stopper &lt;-chan struct{}) error {
        slowFunction()
        return nil
    })
    switch err {
    case deadline.ErrTimeOut:
        fmt.Println(&quot;Timeout&quot;)
    default:
        fmt.Println(err)
    }
}
</code></pre>

<h5 id="back-off">Back off</h5>
<p>A backoff algorithm waits for a set period before retrying after the first failure, this then increments
with subsequent failures up to a maximum duration.</p>
<p>go-resiliency package and the retryier package</p>
<h5 id="circuit-breaking">Circuit breaking</h5>
<p>Circuit breaking is all about failing fast, automatically degrade functionality when the system is under stress.</p>
<p>how it works:
Under normal operations, like a circuit breaker in your electricity switch box, the breaker is closed and traffic
flows normally. However, once the pre-determined error threshold has been exceeded, the breaker enters the open state,
and all requests immediately fail without even being attempted. After a period, a further request would be allowed
and the circuit enters a half-open state, in this state a failure immediately returns to the open state regardless
of the errorThreshold. Once some requests have been processed without any error, then the circuit again returns
to the closed state, and only if the number of failures exceeded the error threshold would the circuit open again.</p>
<p><img alt="" src="../circuit.png" /></p>
<pre><code class="go">// go-resilience

// Threshold: number of times a request can fail before the circuit opens
// successThreshold: number of times that we need a successful reqeust in the half-open state before we move back to open
// timeout: the time that circuit will stay in the open state before chaning to half-open
func New (error Threshold, successThreshold int, timeout time.Duration) *Breaker
package main

import (
    &quot;fmt&quot;
    &quot;time&quot;
)

func main() {
    b := breaker.New(3, 1, 5*time.Second)
    for {
        result := b.Run(func() error {
            // call some service
            time.Sleep(2 * time.Second)
            return fmt.Errorf(&quot;Timeout&quot;)
        })

        switch result {
        case nil:
            // success
        case breaker.ErrBreadkerOpen:
            // our function wasn't run because the breaker was open
            fmt.Println(&quot;Breaker open&quot;)
        default:
            fmt.Println(result)
        }
        time.Sleep(500 * time.Millisecond)
    }

}
</code></pre>

<p>One of more modern implementations of circuit breaking and timeouts is the Hystrix library from Netflix.</p>
<ul>
<li>github.com/Netflix/Hystrix</li>
<li>github.com/afex/hystrix-go</li>
</ul>
<h5 id="health-checks">Health checks</h5>
<p>Every services should expose a health check endpoint which can be accessed by the consul or another server monitor.
Recommend you look at implementing these features:</p>
<ul>
<li>Data store connections status(general connection state, connection pool status)</li>
<li>current response time (rolling average)</li>
<li>burrent connections</li>
<li>bad requests(running average)</li>
</ul>
<h5 id="throttling">Throttling (限流)</h5>
<p>Throttling is a pattern where you restrict the number of connections that a service can handle,
returning an HTTP error code when this threshold has been exceeded.</p>
<h3 id="service-discovery">Service discovery</h3>
<blockquote>
<p>Microservices are easy, building microservice is hard</p>
</blockquote>
<p>The solution is service discovery and the use of a dynamic sevice registery, like Consul or Etcd.
There two main patterns for service discovery:</p>
<h5 id="server-side-service-discovery">server-side service discovery</h5>
<p>typically, there will be a resverse proxy which acts as a gateway to your services, it contains the dynamic
service registry and forwards your request on to the backend services.
The reverse proxy my become a bottleneck.</p>
<h5 id="client-side-service-discovery">client-side service discovery</h5>
<p>Prefer client-side, this gives you greater control over what happens when a failure occurs.
Client is responsible for the service discovery and load balancing.</p>
<h5 id="load-balancing">Load balancing</h5>
<p>Implement in Go</p>
<p><code>func NewLoadBalancer(strategy Strategy, endpoints []url.URL) * loadBalancer</code></p>
<h3 id="caching">Caching</h3>
<p>you should be talking about consistency and the tradeoffs with performance and cost.</p>
<h1 id="6-microservices-frameworks">6. Microservices Frameworks</h1>
<h3 id="what-makes-a-good-microservice-frameworkds">What makes a good microservice Frameworkds</h3>
<p><img alt="" src="../microservice.png" /></p>
<h3 id="micro">Micro</h3>
<p>github.com/micro/go-micro</p>
<ul>
<li>Tooling (CI/CD, cross platform):  protoc</li>
<li>Maintainable: verion</li>
<li>Format(REST/RPC): use googles Protocol Buffers</li>
<li>Patterns: most have been implemented in Micro and many more are avaiable as plugins.</li>
<li>Language independence: proto buffer support</li>
<li>Ability to interface with other frameworks:</li>
<li>Efficiency:</li>
<li>Quality: very high with automated builds</li>
</ul>
<h3 id="kite">Kite</h3>
<p>go get github.com/koding/kite</p>
<h3 id="grpc">gRPC</h3>
<pre><code>$ go get google.golang.org/grpc
$ go get -u github.com/golang/protobuf/{proto,protoc-gen-go}
</code></pre>

<h1 id="7-logging-and-montoring">7. Logging and Montoring</h1>
<p>stack traces and other application outout which helps you diagnose a problem can be broken down into three categories:</p>
<ul>
<li>Metrics: such as time series data(for example, transaction or individual component timings)</li>
<li>Text-based logs: such as Nginx or text log from your application software</li>
<li>Exceptions</li>
</ul>
<h3 id="metrics">Metrics</h3>
<p>time-series database using a unique key as an identifier</p>
<p>Types of data best represented by metrics: it is the data that is meaningful when expressed by simple numbers,
such as request timings and counts.</p>
<h5 id="name-convertions">Name convertions (命名惯例)</h5>
<p>良好一致性的设计允许我们使用通配符过滤。statsd</p>
<h5 id="saassoftware-as-a-service-datadog">Saas(software as a service): Datadog</h5>
<h5 id="self-hosted">Self-hosted:</h5>
<p>There are many options for backend data stores such as Graphite, Prometheus, InfluxDB, ElasticSearch.
However, when it comes to graphing, Grafana leads the way.</p>
<h5 id="graafana">Graafana</h5>
<p>Display metrics</p>
<h3 id="logging">Logging</h3>
<h5 id="distributed-tracing-with-correlation-ids">Distributed tracing with correlation IDs</h5>
<p>zipkin is a distributed tracing system designed to trouble shoot latency.</p>
<h5 id="elk-elasticsearch-logstash-and-kibana">ELK (Elasticsearch, Logstash, and Kibana)</h5>
<ul>
<li>Elasticsearch: databastore for logging data</li>
<li>Logstash: is used for reading the data from your application logs and storing it in ElasticSearch</li>
<li>Kibana: use for query data</li>
</ul>
<h3 id="exceptions">Exceptions</h3>
<p>Go has two great methods for handling unexpected errors:</p>
<h5 id="panic">panic</h5>
<p><code>func panic(v interface{})</code>, built-in panic stops normal execution of the current goroutine,
All the defered functions are run in the normal way then the program is terminated.</p>
<h5 id="recover">recover</h5>
<p>The recover function allows to manage the behavior of a panicking goroutine.
When called inside a deferred function, recover stops the execution of the panic and returns the error passed to the
call of panic.</p>
<p><code>func recover() interface{}</code></p>
<pre><code class="go">func (p *panicHandler) ServeHTTP(rw http.ResponseWriter, r *http.Request) {
    defer func() {
        if err := recover(); err != nil {
            p.logger.WithFields(
                logrus.Fields{
                    &quot;handler&quot;: &quot;panic&quot;,
                    &quot;status&quot;:  http.StatusInternalServerError,
                    &quot;method&quot;:  r.Method,
                    &quot;path&quot;:    r.URL.Path,
                    &quot;query&quot;:   r.URL.RawQuery,
                },
            ).Error(fmt.Sprintf(&quot;Error: %v\n%s&quot;, err, debug.Stack()))
            // runtime/debug returns a formatted stack trace of the goroutine that calls it
            rw.WriteHeader(http.StatusInternalServerError)
        }
    }()

    p.next.ServeHTTP(rw, r)
}
</code></pre>

<h1 id="8-security">8. Security</h1>
<h3 id="encryption-and-signing">Encryption and signing</h3>
<h5 id="symmetric-key-encryption">Symmetric-key encryption</h5>
<p>one key is used for both the encryption and desryption.</p>
<h5 id="public-key-cryptography-asynmmetric-encryption">Public-key cryptography (asynmmetric encryption)</h5>
<p>both sides requiring to know the secret.</p>
<p>The public key is used for encrypting information while the private can only be used for decrypting.</p>
<h5 id="digital-signatures">Digital signatures</h5>
<p>A digital signature works by encrypting a message with a private key and then transferring the signed message.</p>
<h5 id="x509-digital-certificates">X.509 digital certificates</h5>
<p>man-in-the-middle-attack</p>
<p>A digital certificate contains three things:</p>
<ul>
<li>A public key</li>
<li>Certificate information such as the owner's name of ID</li>
<li>One or more digital signatures</li>
</ul>
<h5 id="tlsssl">TLS/SSL</h5>
<p>TLS works using symmetrical encryption, where the client and the server both have a key which is used for encryption and decryption. If you remember the previous section, we introduced symmetrical encryption and the problems of distributing keys. TLS gets around this problem by using asymmetrical encryption in the first part of the handshake. The client retrieves the certificate containing the public key from the server and generates a random number; it uses the public key to encrypt this random number and sends it back to the server. Now that both parties have the random number, they use this to generate symmetrical keys which are used for encrypting and decrypting the data over the transport.</p>
<h3 id="external-security">External security</h3>
<ul>
<li>Layer 2 or 3 firewalls</li>
<li>Web application firewall(WAF), Cloudflare supports OWASP CRS</li>
<li>API Gateway
    - Request validation
    - Authorization
    - Rate limiting
    - Logging
    - Caching
    - Request and response transformations</li>
<li>DDoS protection
    - UDP fragment: creating datagrams which contain fake packets, when server attempts to reassemble packets, it is unable to do so and the resources are quickly overwhelmed
    - UDP flood: sending a flood of UDP packets with a spoofed source address to an IP address
    - DNS: A DNS attack utilizes a UDP flood to take out a DNS server.
    - NTP: is another amplification attach which takes advantage of a feature built into NTP servers
    - Chargen: character generation protocol
    - SYN flood: a classic DDoS attack that sends a lot of packets to a machine
    - SSDP: simple services discovery protocol
    - ACK: firewall; network scrubbing filters</li>
</ul>
<h3 id="application-sercurity">Application sercurity</h3>
<ul>
<li>Prevention
    - secure communication
    - authorization
    - authentication</li>
</ul>
<ul>
<li>Detection: applications logs</li>
</ul>
<ul>
<li>Response</li>
</ul>
<ul>
<li>Recovery: well backed up and aotomated</li>
</ul>
<ul>
<li>input validation: github.com/go-playground/validator</li>
</ul>
<pre><code>package validation

import (
    &quot;encoding/json&quot;
    &quot;net/http&quot;

    validator &quot;gopkg.in/go-playground/validator.v9&quot;
)

// Request defines the input structure received by a http handler
type Request struct {
    Name  string `json:&quot;name&quot;`
    Email string `json:&quot;email&quot; validate:&quot;email&quot;`
    URL   string `json:&quot;url&quot; validate:&quot;url&quot;`
}

var validate = validator.New()

func Handler(rw http.ResponseWriter, r *http.Request) {
    request := Request{}

    err := json.NewEncoder(rw).Encode(&amp;request)
    if err != nil {
        http.Error(rw, &quot;Invalid request object&quot;, http.StatusBadRequest)
        return
    }

    err = validate.Struct(request)
    if err != nil {
        http.Error(rw, err.Error(), http.StatusBadRequest)
        return
    }

    rw.WriteHeader(http.StatusOK)
}
</code></pre>

<ul>
<li>Fuzzing : github.com/dvyukov/go-fuzz/go-fuzz  generating random input</li>
</ul>
<ul>
<li>TLS:</li>
</ul>
<ul>
<li>Securing data at rest : encrypt data in the database</li>
</ul>
<ul>
<li>Physical machine access</li>
</ul>
<ul>
<li>OWASP: REST Security Cheat Sheet (https://www.owasp.org/index.php/REST_Security_Cheat_Sheet).
    - Never storing session tokens in a URL, use cookie or a post value (url can query in log)
    - XSS and CSRF.
    - Insecure direct object references. Checking authenticated users can modify the object in the request</li>
</ul>
<ul>
<li>Password Hashing, hash is one-way cryptography
    - Adding a salt and a pepper. （加盐是一种常见的方式，防止被彩虹表暴力破解）
    - bcrypt: golang.org/x/crypto/bcrypt</li>
</ul>
<h3 id="maintenance">Maintenance</h3>
<ul>
<li>Patching containers: run a regular build and deploy even if the application code does not change</li>
<li>Software upadtes:</li>
<li>Patching application code</li>
<li>Logging
    - Who is preforming the action
    - what has failed or succeed
    - when is the action occurring
    - why this has failed or succeeded
    - how you can deal with the issue</li>
</ul>
<h1 id="9-event-driven-architecture">9. Event-Driven Architecture</h1>
<h3 id="differences-between-synchronous-and-asynchronous-processing">Differences between synchronous and asynchronous processing</h3>
<ul>
<li>synchronous: easier to understand, write, debug</li>
<li>asynchronous: decoupling, scale, bath processing, time-based processing</li>
</ul>
<p><img alt="" src="../async.png" /></p>
<h3 id="types-of-asynchronous-messages">Types of asynchronous messages</h3>
<ul>
<li>Pull/queue messaging</li>
</ul>
<p>May have a worker process running, read from the queue retrieving the messages one by one, perform the required work,
then delete the message from the queue.
Often there is also a queue commonly called a "dead letter queue" should the worker process fail for any reason then
the message would be added to the dead letter queue.</p>
<p><img alt="" src="../pull.png" /></p>
<ul>
<li>Push messaging</li>
</ul>
<p><img alt="" src="../push.png" /></p>
<p>NATS.io</p>
<p>github.com/nats-io/go-nats</p>
<h3 id="domain-driven-design">Domain-Driven Design</h3>
<p>Anatomy of DDD:</p>
<ul>
<li>Straegic design</li>
<li>Tactical design</li>
<li>Ubiquitous language</li>
<li>Bounded Contexts</li>
<li>Context Mapping</li>
</ul>
<h3 id="sofware">Sofware</h3>
<ul>
<li>Kafka : is a distributed streaming platform allows you to publish and subscribe to streams of records</li>
<li>NATS.io: open source messaging system written in Go. Can perform at-most-once and at-least-once delivery</li>
<li>AWS SNS/SQS</li>
<li>Google Cloud Pub/Sub</li>
</ul>
<h1 id="10-continuous-delivery">10. Continuous Delivery</h1>
<h3 id="what-is-continuous-delivery">What is Continuous Delivery?</h3>
<p>Aspects of continuous delivery</p>
<ul>
<li>Reproducibility and easy setup</li>
<li>Artifact storage</li>
<li>Automation of tests</li>
<li>Automation of integration tests</li>
<li>Infrastructure as code</li>
<li>Security scanning</li>
<li>Static code analysis</li>
<li>Smoke testing</li>
<li>End 2 end testing</li>
<li>Monitoring - track deployments in metrics</li>
</ul>
<p>What does Go bring as a language which helps us with this? Now, let's look at the process:</p>
<ul>
<li>Build</li>
<li>Test</li>
<li>Package</li>
<li>Integration test</li>
<li>Benchmark test</li>
<li>Security test</li>
<li>Provision production</li>
<li>Smoke test</li>
<li>Monitor</li>
</ul>
<h3 id="what-is-container-orchestration">What is container orchestration ?</h3>
<ul>
<li>Managed, such as PasS solutions like AWS ECS</li>
<li>Unmanaged, like Kubenetes</li>
</ul>
<h3 id="what-is-immutable-infrastructure">What is immutable infrastructure?</h3>
<h3 id="terraform">Terraform</h3>
<p>https://terraform.io, which enables the provisioning of infrastructure for several applications and cloud providers.</p>
<h3 id="continuous-delivery-workflow">Continuous delivery workflow</h3>
<ul>
<li>Compile application</li>
<li>Unit test</li>
<li>Benchmark</li>
<li>Static code analysis: megacheck, safesql</li>
<li>Integration test</li>
<li>Build Docker image</li>
<li>Deploy application</li>
<li>Smoke test</li>
<li>Monitoring/Alerting</li>
</ul>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../../../js/main.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="../../../search/main.js"></script>
<script src="../../../js/gitbook.min.js"></script>
<script src="../../../js/theme.min.js"></script>
</body>
</html>